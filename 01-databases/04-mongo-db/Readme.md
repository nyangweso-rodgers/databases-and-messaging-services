# MongoDB

## Table Of Contents

# Introduction to MongoDB

- **MongoDB** is a `NoSQL` document-based database written in `C++`.

- **MongoDB** vs **RDBMS** Concepts

| RDBMS Concept | MongoDB Concept |
| ------------- | --------------- |
| Database      | Database        |
| Tables        | Collections     |
| Rows          | Documents       |
| Columns       | Fields          |
| Index         | Index           |

- **When should I use MongoDB instead of MySQL?**

  - **MySQL** and **MongoDB** are two rather specific types of databases. Generally you first pick the **storage method** you want.

    - The storage methods divide themselves into two groups: **relational** and **NoSQL**.
    - And the **NoSQL storage** methods can be divided in about four groups (there’s a lot of division methods):
      - column store,
      - key-value store,
      - graph store,
      - document store.
    - **MongoDB** is a **document store database system**.

  - But just to compare the two: a **relational database** is excellent for storing **facts** that all have intrinsic connections between them, that are the same every time.
    - Let’s say you have a school, and there’s classes that have students, and students attend courses, and courses have teachers, who teach students, give out grades, e.t.c.,. Every noun in that sentence could be made into a table, with fixed, intrinsic relations with the other tables. A student never teaches classes, a teacher never receives grades, and so on. You could still make a relational database that allows students to teach classes, using association tables, but if that keeps happening you’ll probably want to have a different kind of database altogether.
  - **NoSQL databases** in general are for when the data you are storing does not have (that many) fixed and intrinsic inner relations. Say, you want to store your error logs. A log has a code, a message, a level, and so on. But those are all attributes of your log, not separate entities with many-to-many relations with other entities.
  - Now, one of the other store methods I mentioned is **key-value store**. That means getting rid of all connections between data. You’ve got just a single row with a key and your value(s) (using JSON you can store as many values in a single field as you want). Document store can be called a variant of that, except it accommodates more complex values more easily.

# MongoDB Concepts

## 1. MongoDB Server

- This is a server-side component which can host multiple databases.

## Cluster

- a **cluster** refers to a group of servers that work together to store and manage data.
- The primary purpose of a **cluster** is to distribute data across multiple nodes to ensure high availability, fault tolerance, and scalability.
- MongoDB clusters provide several key features:
  1. Replication
  2. Sharding
  3. Load Balancing
  4. High availability

## 2. MongoDB database

- This is a physical container of collections.

## 3. Collection

- in **MongoDB** is equivalent to a relational database table and it exists within a single database.
- It includes a group of **MongoDB** documents.

## 4. Document

- includes a set of `key` `value` pairs.
- All documents include a dynamic schema which means documents which comprise of same collection do not need to have same set of fields and structure.

## 5. Replica Sets

- Are a set of a few connected mongodb instances that store the same data.

## `_id` Field

- the `_id` field is a unique identifier, automatically generated by MongoDB for each document in a **collection**.
- It is used to uniquely identify documents within a collection, and it is indexed by default to ensure fast queries and efficient performance.
- Even though the `_id` field can have different data types in **MongoDB**, including `strings`, `integers`, and `objects`. However, it's generally recommended to use the default `ObjectId` data type, which is a `12-byte` value that consists of a `timestamp`, **machine identifier**, **process identifier**, and a **random value**.
- `ObjectId` value consists of a 12-byte value made up of the following components:

  - A `4-byte` timestamp, representing the ObjectID's creation, measured in seconds since the Unix epoch.
  - A `5-byte` random value generated once per process. This random value is unique to the machine and process.
  - A `3-byte` incrementing counter, initialized to a random value.

- **Methods** related to `ObjectID` include:
  - `ObjectId.getTimestamp()` - Returns the timestamp portion of the object as a Date.
  - `ObjectId.toString()` - Returns the JavaScript representation in the form of a string literal "`ObjectId(...)`".
  - `ObjectId.valueOf()` - Returns the representation of the object as a hexadecimal string. The returned string is the `str` attribute.

# Resources and Further Reading

1. [github.com/mongodb-js](https://github.com/mongodb-js)
